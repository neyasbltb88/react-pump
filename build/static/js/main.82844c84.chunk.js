(window["webpackJsonpreact-pump"]=window["webpackJsonpreact-pump"]||[]).push([[0],{22:function(e,t,n){e.exports=n(37)},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(18),s=n.n(i),r=(n(27),n(19)),c=n(7),l=n(5),u=n(6),d=n(9),p=n(8),m=n(10),h=function(e,t){var n=Math.floor(e+Math.random()*(t+1-e));return n},f=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",n=0;n<e;n++)t+=String.fromCharCode(h(97,122));return t},w=function e(t,n){var a=this;Object(l.a)(this,e),this.message=function(e,t){a.worker.port.postMessage(JSON.stringify({type:e,data:t}))},this.handler=function(e){try{var t=JSON.parse(e.data),n=t.type,o=t.data;console.log(n,o);var i=a.handlers[n];i&&i(o)}catch(s){console.log(s)}},this.worker=t,this.handlers=n,this.worker.port.addEventListener("message",this.handler,!1),this.worker.port.start()};var v=function(e,t){return function(e,t){var n,a,o=!1;return function i(){if(o)return n=arguments,void(a=this);e.apply(this,arguments),o=!0,setTimeout((function(){o=!1,n&&(i.apply(a,n),n=a=null)}),t)}}(e,t)},g=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};Object(l.a)(this,e),this.handler=function(){var e={top:window.screenY,right:window.screenX+window.outerWidth,bottom:window.screenY+window.outerHeight,left:window.screenX};t.comparePosition(e)&&(t.cb(e),t.lastPosition=e),t.autoUpdate&&(t.raf=window.requestAnimationFrame((function(){return t.handler()})))},this.cb=n,this.handler=v(this.handler,200),this.lastPosition={top:null,right:null,bottom:null,left:null},this.raf=null,this.autoUpdate=!1,this.start()}return Object(u.a)(e,[{key:"comparePosition",value:function(e){var t=!1;for(var n in e)e[n]!==this.lastPosition[n]&&(t=!0);return t}},{key:"start",value:function(){this.autoUpdate=!0,this.handler()}},{key:"stop",value:function(){this.autoUpdate=!1,window.cancelAnimationFrame(this.raf)}}]),e}(),k=(n(28),n(29),function(e){var t=e.onClick,n=e.label,a=e.disabled;return o.a.createElement("button",{className:"Btn",onClick:t,disabled:a},n)}),b=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).worker=new SharedWorker("./services/worker.js"),n.messageHandler=new w(n.worker,{"pumping:connected":function(){n.onPumpingOpen()},"pumping:disconnected":function(){n.onPumpingClose()}}),n.state={opened:!1,ready:!1},n.onPumpingOpen=function(){n.setState({opened:!0})},n.onPumpingClose=function(){n.setState({opened:!1,ready:!1})},n.onClick=function(){window.open("".concat("/react-pump","/pumping"),f(),"resizable"),n.setState({opened:!0})},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){window.main_state=this.state,window.messageHandler=this.messageHandler}},{key:"componentDidUpdate",value:function(){window.main_state=this.state}},{key:"render",value:function(){var e=this.state.opened;return o.a.createElement("div",{className:"Main"},o.a.createElement(k,{onClick:this.onClick,label:"\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u043d\u0430\u0441\u043e\u0441",disabled:e}))}}]),t}(a.Component),y=(n(30),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).worker=new SharedWorker("./services/worker.js"),n.messageHandler=new w(n.worker,{"position:update":function(e){var t=e.target,a=e.position;if("Pumping"!==t){var o=n.state.Pumpeds;n.setState({Pumpeds:o,target:a})}}}),n.state={lastTitle:"",Pumping:{},Pumpeds:{}},n.openPumped=function(){setTimeout((function(){var e=f();window.open("".concat("/react-pump","/pumped"),e,"resizable")}),100)},n.onClose=function(){n.closeAllPumpeds(),n.messageHandler.message("pumping:disconnected")},n.closeAllPumpeds=function(){n.messageHandler.message("pumped:closeAll")},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"onPosition",value:function(e){this.messageHandler.message("position:update",{target:"Pumping",position:e}),this.setState({Pumping:e})}},{key:"componentDidMount",value:function(){var e=this,t=document.title;document.title="\u041d\u0430\u0441\u043e\u0441",this.setState({lastTitle:t}),this.openPumped(),window.addEventListener("beforeunload",this.onClose),this.messageHandler.message("pumping:connected"),new g((function(t){return e.onPosition(t)}))}},{key:"componentWillUnmount",value:function(){document.title=this.state.lastTitle}},{key:"render",value:function(){var e=this.state.Pumping,t=Object.keys(e).map((function(t){return o.a.createElement("div",{key:t},t,": ",e[t])}));return o.a.createElement("div",{className:"Pumping"},o.a.createElement("div",null,"Pumping"),t,o.a.createElement("br",null),o.a.createElement(k,{onClick:this.closeAllPumpeds,label:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0448\u0430\u0440\u0438\u043a\u0438"}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(k,{onClick:this.openPumped,label:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0448\u0430\u0440\u0438\u043a"}))}}]),t}(a.Component)),P=(n(31),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).worker=new SharedWorker("./services/worker.js"),n.messageHandler=new w(n.worker,{"pumped:close":function(e){window.name===e&&window.close()},"pumped:closeAll":function(){window.close()}}),n.state={lastTitle:"",position:{}},n.onClose=function(){n.messageHandler.message("pumped:disconnected",window.name)},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"onPosition",value:function(e){this.messageHandler.message("position:update",{target:window.name,position:e}),this.setState({position:e})}},{key:"componentDidMount",value:function(){var e=this,t=document.title;document.title="\u0428\u0430\u0440\u0438\u043a",window.addEventListener("beforeunload",this.onClose),this.messageHandler.message("pumped:connected",window.name),new g((function(t){return e.onPosition(t)})),this.setState({lastTitle:t})}},{key:"componentWillUnmount",value:function(){document.title=this.state.lastTitle}},{key:"render",value:function(){var e=this.state.position,t=Object.keys(e).map((function(t){return o.a.createElement("div",{key:t},t,": ",e[t])}));return o.a.createElement("div",{className:"Pumped"},o.a.createElement("div",null,"Pumped: ",window.name),t)}}]),t}(a.Component)),E=(n(32),function(){return o.a.createElement("div",{className:"App"},o.a.createElement(r.a,{basename:"react-pump"},o.a.createElement(c.a,{path:"/",component:b,exact:!0}),o.a.createElement(c.a,{path:"/pumping",component:y}),o.a.createElement(c.a,{path:"/pumped",component:P})))});s.a.render(o.a.createElement(E,null),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.82844c84.chunk.js.map